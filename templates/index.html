{% extends "base.html" %}

{% block style %}
.date_input input {
    margin: 0 20px 0 0;
}

.date_input{
    margin: 20px 0;
}


{% endblock %}

{% block content %}
<!-- –í–°–Å –ß–¢–û –•–û–ß–ï–®–¨ –í–ò–î–ï–¢–¨ –ù–ê –°–¢–†–ê–ù–ò–¶–ï - –ü–ò–®–ï–®–¨ –ó–î–ï–°–¨ -->

<h1>–ü—Ä–∏–≤–µ—Ç, –µ–ø—Ç–∞!</h1>
<h2>–¢—É—Ç —Ç—ã –º–æ–∂–µ—à—å –≤–≤–µ—Å—Ç–∏ —Å—Å—ã–ª–∫—É, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–¥–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å</h2>

<div>
    <form method="post">
        <p>
            <label for='user_url'>Put your link here:</label>
            <input id='user_url' type="text" name="user_url">
        </p>
        Set life date of link (default: 1 year):
        <div class="date_input">
            <label for="year">Year:</label>
            <input type="number" min="0" value="1" max="100" step="1" id="year" name="year">
        
            <label for="month">Month:</label>
            <input type="number" min="0" value="0" max="12" step="1" id="month" name="month">

            <label for="day">Day:</label>
            <input type="number" min="0" value="0" max="31" step="1" id="day" name="day">
        </div>
        <button type='submit'>–°–æ–∑–¥–∞—Ç—å</button>
        
        
    </form>
</div>

<div>
 {% if shortened_link %}
<div style="margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px;">
    <p>Your short link is: <a href="{{ shortened_link }}" target="_blank" id="shortLink">{{ shortened_link }}</a></p>
    <p>For original: <a href="{{ orig_link }}" target="_blank">{{ orig_link }}</a></p>
     <p>
        This link will expire at <a href="https://calendar.google.com/calendar/r/day/{{ year }}/{{ month }}/{{ day }}" target="_blank">{{ year }}-{{ month }}-{{ day }}</a>

    </p>
    
    <button onclick="copyShortLink()" style="padding: 8px 16px; margin-top: 10px;">
        üìã Copy Short Link
    </button>
    <span id="copyMessage" style="margin-left: 10px; color: green;"></span>
</div>

<script>
function copyShortLink() {
    const shortLink = "{{ shortened_link }}";
    
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API
    navigator.clipboard.writeText(shortLink).then(() => {
        const message = document.getElementById('copyMessage');
        message.textContent = 'Copied!';
        setTimeout(() => {
            message.textContent = '';
        }, 2000);
    }).catch(err => {
        // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
        const textArea = document.createElement('textarea');
        textArea.value = shortLink;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        const message = document.getElementById('copyMessage');
        message.textContent = 'Copied!';
        setTimeout(() => {
            message.textContent = '';
        }, 2000);
    });
}
</script>
{% endif %}
</div>


{% endblock %}